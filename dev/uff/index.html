<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Ultrasound File Format · USTB.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://Dainou01.github.io/USTB.jl/uff/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">USTB.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Ultrasound File Format</a><ul class="internal"><li><a class="tocitem" href="#Points"><span>Points</span></a></li><li><a class="tocitem" href="#Probe"><span>Probe</span></a></li><li><a class="tocitem" href="#Linear-Array"><span>Linear Array</span></a></li><li><a class="tocitem" href="#Curvilinear-Array"><span>Curvilinear Array</span></a></li><li><a class="tocitem" href="#Wavefronts"><span>Wavefronts</span></a></li><li><a class="tocitem" href="#Windows"><span>Windows</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Ultrasound File Format</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Ultrasound File Format</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Dainou01/USTB.jl/blob/main/docs/src/uff.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="UFF-Ultrasound-File-Format"><a class="docs-heading-anchor" href="#UFF-Ultrasound-File-Format"><code>UFF</code> - Ultrasound File Format</a><a id="UFF-Ultrasound-File-Format-1"></a><a class="docs-heading-anchor-permalink" href="#UFF-Ultrasound-File-Format" title="Permalink"></a></h1><h2 id="Points"><a class="docs-heading-anchor" href="#Points">Points</a><a id="Points-1"></a><a class="docs-heading-anchor-permalink" href="#Points" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Point" href="#USTB.UFF.Point"><code>USTB.UFF.Point</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Point(r, θ, ϕ)</code></pre><p>Point contains the position of a point in a tridimensional space. It express that location in spherical coordinates which allows to place  points at infinity but in a given direction.</p><p>The Julia implementation of the UFF Point type is a derivation of the CoordinateTransformations.jl <code>Spherical</code> type. The UFF Point defines the azimuth θ as the angle from the point location to the YZ plane. The elevation ϕ is the angle from the point location to the XZ plane.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Point.jl#L7-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.PointFromCartesian" href="#USTB.UFF.PointFromCartesian"><code>USTB.UFF.PointFromCartesian</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">(::PointFromCartesian)(x::AbstractVector)</code></pre><p>Transformation functor to map 3D Cartesian coordinates into UFFs <code>Point</code> type. The conversion for <span>$[x, y, z]$</span> is given by</p><p class="math-container">\[\begin{aligned}
    r       &amp;= \sqrt{x^2+y^2+z^2}  \\
    \theta &amp;= \text{atan}(x, z)           \\
    \phi   &amp;= \text{asin}(y, r)
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Point.jl#L49-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.CartesianFromPoint" href="#USTB.UFF.CartesianFromPoint"><code>USTB.UFF.CartesianFromPoint</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">(::CartesianFromPoint)(x::Point)</code></pre><p>Transformation functor to map UFF <code>Point</code> into Cartesian coordinates. The conversion for <span>$[r, \theta, \phi]$</span> is given by</p><p class="math-container">\[\begin{aligned}
    x &amp;= r\cdot\sin(\theta)\cdot\cos(\phi) \\
    y &amp;= r\cdot\sin(\phi)                     \\
    z &amp;= r\cdot\cos(\theta)\cdot\cos(\phi) 
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Point.jl#L70-L83">source</a></section></article><hr/><h2 id="Probe"><a class="docs-heading-anchor" href="#Probe">Probe</a><a id="Probe-1"></a><a class="docs-heading-anchor-permalink" href="#Probe" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Probe" href="#USTB.UFF.Probe"><code>USTB.UFF.Probe</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Probe</code></pre><p><code>Probe</code> contains the position and attitude of all elements of a probe.  Optionally PROBE can hold each element width and height, assuming the elements were rectangular. Information is stored in a  single matrix form called geometry, one row per element containing: [x y z azimuth elevation width height]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L8-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.length-Tuple{USTB.UFF.Probe}" href="#Base.length-Tuple{USTB.UFF.Probe}"><code>Base.length</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return the number of elements in the Probe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L22">source</a></section></article><h3 id="Interfaces"><a class="docs-heading-anchor" href="#Interfaces">Interfaces</a><a id="Interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#Interfaces" title="Permalink"></a></h3><p><code>Probe</code> implements the <code>Instance Properties</code> interface from <code>Base</code> allowing to access specific properties of <code>Probe</code> easily, through the <code>.</code> operator.</p><article class="docstring"><header><a class="docstring-binding" id="Base.propertynames" href="#Base.propertynames"><code>Base.propertynames</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Implement the property interface for the same variables used by MATLAB</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.getproperty-Tuple{USTB.UFF.Probe, Symbol}" href="#Base.getproperty-Tuple{USTB.UFF.Probe, Symbol}"><code>Base.getproperty</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.getproperty(p::Probe, s::Symbol)</code></pre><p>Allow indexing by property, similar to MATLABs dependent get methods, <code>getproperty</code> is extended to allow getting the geometries columns by symbols for lookups. Available symbols and [aliases] for lookup are given by</p><pre><code class="nohighlight hljs">:x                    = p.geometry[:, 1]  # center of the element in the x axis[m]
:y                    = p.geometry[:, 2]  # center of the element in the y axis[m]
:z                    = p.geometry[:, 3]  # center of the element in the z axis[m]
:θ [:az, :azimuth]    = p.geometry[:, 4]  # orientation of the element in the azimuth direction [rad]
:ϕ [:alt, :elevation] = p.geometry[:, 5]  # orientation of the element in the elevation direction [rad]
:w [:width]           = p.geometry[:, 6]  # element width [m]
:h [:height]          = p.geometry[:, 7]  # element height [m]
:r [:distance]        = norm(p.geometry[:,1:3], dims=2) # Distance from elements to origin [m] </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L47-L64">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.setproperty!-Tuple{USTB.UFF.Probe, Symbol, Any}" href="#Base.setproperty!-Tuple{USTB.UFF.Probe, Symbol, Any}"><code>Base.setproperty!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Set property function</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L75">source</a></section></article><h4 id="Property-Interface-Example"><a class="docs-heading-anchor" href="#Property-Interface-Example">Property Interface Example</a><a id="Property-Interface-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Property-Interface-Example" title="Permalink"></a></h4><pre><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a = Probe(Point([2,0,4]), rand(3,7));</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a[:,1:3] = [1 2 3; 4 5 6; 7 8 9];</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a.x</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 1.0
 4.0
 7.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a.y = [10, 11, 12];</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a.geometry</code><code class="nohighlight hljs ansi" style="display:block;">3×7 Matrix{Float64}:
 1.0  10.0  3.0  0.371623   0.240793  0.901271  0.439776
 4.0  11.0  6.0  0.218784   0.905451  0.915652  0.0857129
 7.0  12.0  9.0  0.0389486  0.135126  0.986494  0.450973</code></pre><h3 id="Method-delegations"><a class="docs-heading-anchor" href="#Method-delegations">Method delegations</a><a id="Method-delegations-1"></a><a class="docs-heading-anchor-permalink" href="#Method-delegations" title="Permalink"></a></h3><p><code>Probe</code> also forwards <code>Base.size</code> and <code>Base.getindex</code> to <code>Probe.geometry</code>, meaning <code>size(p::Probe)</code> and <code>getindex(p::Probe,...)</code> work as they do for matrices, but operate on <code>Probe.geometry</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Base.size-Tuple{USTB.UFF.Probe, Vararg{Any}}" href="#Base.size-Tuple{USTB.UFF.Probe, Vararg{Any}}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Forwarded <code>Base.size</code> to <code>Probe.geometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.getindex-Tuple{USTB.UFF.Probe, Vararg{Any}}" href="#Base.getindex-Tuple{USTB.UFF.Probe, Vararg{Any}}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Forwarded <code>Base.getindex</code> to <code>Probe.geometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.setindex!-Tuple{USTB.UFF.Probe, Vararg{Any}}" href="#Base.setindex!-Tuple{USTB.UFF.Probe, Vararg{Any}}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Forwarded <code>Base.setindex!</code> to <code>Probe.geometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Probe.jl#L31">source</a></section></article><h2 id="Linear-Array"><a class="docs-heading-anchor" href="#Linear-Array">Linear Array</a><a id="Linear-Array-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-Array" title="Permalink"></a></h2><h2 id="Curvilinear-Array"><a class="docs-heading-anchor" href="#Curvilinear-Array">Curvilinear Array</a><a id="Curvilinear-Array-1"></a><a class="docs-heading-anchor-permalink" href="#Curvilinear-Array" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.CurvilinearArray" href="#USTB.UFF.CurvilinearArray"><code>USTB.UFF.CurvilinearArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct CurvilinearArray &lt;: USTB.UFF.AbstractProbeArray</code></pre><p>Composite type to define a curvilinear array probe geometry CurvilinearArray defines an array of regularly space elements on an  arc in the azimuth dimensions.  Optionally it can hold each element  width and height, assuming the elements are rectangular. </p><p><strong><strong>Fields</strong></strong></p><ul><li><p><code>probe::USTB.UFF.Probe</code>: Wrapped probe</p></li><li><p><code>N::Integer</code>: Number of elements in array</p></li><li><p><code>pitch::Float64</code>: Distance between the elements in the azimuth direction [m]</p></li><li><p><code>radius::Float64</code>: Radius of the curvilinear array [m]</p></li><li><p><code>element_width::Float64</code>: Width of the elements in the azimuth direction [m]</p></li><li><p><code>element_height::Float64</code>: Height of the elements in the elecation direction [m]</p></li></ul><p><strong><strong>Example</strong></strong></p><pre><code class="nohighlight hljs">prb = CurvilinearArray()
prb.N = 128;
prb.pitch = 500e-6;
prb.radius = 70e-3;</code></pre><p>TODO: Link up Probe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/CurvilinearArray.jl#L6">source</a></section></article><hr/><h2 id="Wavefronts"><a class="docs-heading-anchor" href="#Wavefronts">Wavefronts</a><a id="Wavefronts-1"></a><a class="docs-heading-anchor-permalink" href="#Wavefronts" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Wavefront" href="#USTB.UFF.Wavefront"><code>USTB.UFF.Wavefront</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">Wavefront</code></pre><p>Enumeration for wave types.  Exported through USTB.UFF submodule. Available options are </p><table><tr><th style="text-align: right">Wavefront Type</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: right">Plane</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right">Spherical</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">Photoacustic</td><td style="text-align: right">1</td></tr></table><p>See also WAVE</p><p><strong>TODO: Cross link WAVE</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Wavefront.jl#L5-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Wavefront.Plane" href="#USTB.UFF.Wavefront.Plane"><code>USTB.UFF.Wavefront.Plane</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Wavefront instance describing a plane wave</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Wavefront.jl#L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Wavefront.Spherical" href="#USTB.UFF.Wavefront.Spherical"><code>USTB.UFF.Wavefront.Spherical</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Wavefront instance describing a spherical wave</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Wavefront.jl#L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Wavefront.Photoacustic" href="#USTB.UFF.Wavefront.Photoacustic"><code>USTB.UFF.Wavefront.Photoacustic</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Wavefront instance describing a photoacustic wave</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Wavefront.jl#L27">source</a></section></article><hr/><h2 id="Windows"><a class="docs-heading-anchor" href="#Windows">Windows</a><a id="Windows-1"></a><a class="docs-heading-anchor-permalink" href="#Windows" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="USTB.UFF.Window" href="#USTB.UFF.Window"><code>USTB.UFF.Window</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">Window</code></pre><p>Enumeration for window types.  Available options and corresponding values are </p><table><tr><th style="text-align: right">Window Type</th><th style="text-align: right">Value</th></tr><tr><td style="text-align: right">None</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right">Boxcar</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">Flat</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">Rectangular</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">Hanning</td><td style="text-align: right">2</td></tr><tr><td style="text-align: right">Hamming</td><td style="text-align: right">3</td></tr><tr><td style="text-align: right">Tukey25</td><td style="text-align: right">4</td></tr><tr><td style="text-align: right">Tukey50</td><td style="text-align: right">5</td></tr><tr><td style="text-align: right">Tukey75</td><td style="text-align: right">6</td></tr><tr><td style="text-align: right">Tukey80</td><td style="text-align: right">7</td></tr><tr><td style="text-align: right">Sta</td><td style="text-align: right">7</td></tr><tr><td style="text-align: right">Scanline</td><td style="text-align: right">8</td></tr></table><p>See also PULSE, BEAM, PHANTOM, PROBE</p><p><strong>TODO: Link up PULSE</strong></p><p><strong>TODO: Link up BEAM</strong></p><p><strong>TODO: Link up PHANTOM</strong></p><p><strong>TODO: Link up PROBE</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Dainou01/USTB.jl/blob/89f419bd6e6e8377e6ad6018065207f2f4c0363f/src/uff/Window.jl#L5-L31">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 16 June 2023 11:21">Friday 16 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
